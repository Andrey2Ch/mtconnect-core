# üöÄ –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞ MTConnect

## üìã –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

–£ –Ω–∞—Å –µ—Å—Ç—å **–¥–≤–∞ —Å–µ—Ä–≤–µ—Ä–∞**, –∫–æ—Ç–æ—Ä—ã–µ —Ä–∞–±–æ—Ç–∞—é—Ç —Å **–æ–¥–Ω–∏–º–∏ –∏ —Ç–µ–º–∏ –∂–µ –¥–∞–Ω–Ω—ã–º–∏**:

### üì° Edge Gateway (–ø–æ—Ä—Ç 5000)
- **–§–∞–π–ª:** `src/main.ts`
- **–§—É–Ω–∫—Ü–∏–∏:** –°–±–æ—Ä –¥–∞–Ω–Ω—ã—Ö —Å –º–∞—à–∏–Ω, –æ—Ç–ø—Ä–∞–≤–∫–∞ –≤ Railway
- **URL:** http://localhost:5000

### ‚òÅÔ∏è Cloud API (–ø–æ—Ä—Ç 3000)  
- **–§–∞–π–ª:** `apps/cloud-api`
- **–§—É–Ω–∫—Ü–∏–∏:** –ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ –¥–∞—à–±–æ—Ä–¥—ã, –∞–Ω–∞–ª–∏–∑, MongoDB
- **URL:** http://localhost:3000

## üîß –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∑–∞–ø—É—Å–∫ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
```powershell
.\start-local-dev.ps1
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: –†—É—á–Ω–æ–π –∑–∞–ø—É—Å–∫
```powershell
# –¢–µ—Ä–º–∏–Ω–∞–ª 1: Edge Gateway
npm run build
npm run start:edge

# –¢–µ—Ä–º–∏–Ω–∞–ª 2: Cloud API
npm run start:cloud
```

### –í–∞—Ä–∏–∞–Ω—Ç 3: –û—Ç–¥–µ–ª—å–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã
```powershell
# –¢–æ–ª—å–∫–æ Edge Gateway (—Å–±–æ—Ä –¥–∞–Ω–Ω—ã—Ö)
npm run start:edge

# –¢–æ–ª—å–∫–æ Cloud API (–¥–∞—à–±–æ—Ä–¥—ã)
npm run start:cloud
```

## üåê –î–æ—Å—Ç—É–ø–Ω—ã–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã

### Edge Gateway (http://localhost:5000)
- `/` - –≥–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Å —Å—Å—ã–ª–∫–∞–º–∏
- `/current` - MTConnect XML –¥–∞–Ω–Ω—ã–µ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- `/probe` - –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –º–∞—à–∏–Ω–∞—Ö
- `/health` - —Å—Ç–∞—Ç—É—Å —Å–∏—Å—Ç–µ–º—ã
- `/railway-status` - –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Railway
- `/api/machines` - —Å–ø–∏—Å–æ–∫ –º–∞—à–∏–Ω (JSON)
- `/api/adam/counters` - –¥–∞–Ω–Ω—ã–µ Adam-6050

### Cloud API (http://localhost:3000)
- `/` - –≥–ª–∞–≤–Ω—ã–π –¥–∞—à–±–æ—Ä–¥ (dashboard-new.html)
- `/api/dashboard/health` - —Å—Ç–∞—Ç—É—Å –¥–∞—à–±–æ—Ä–¥–∞
- `/api/dashboard/machines` - —Å–ø–∏—Å–æ–∫ –º–∞—à–∏–Ω —Å –∞–Ω–∞–ª–∏—Ç–∏–∫–æ–π
- `/api/dashboard/data/:machineId` - –¥–∞–Ω–Ω—ã–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –º–∞—à–∏–Ω—ã
- `/api/dashboard/status` - –æ–±—â–∏–π —Å—Ç–∞—Ç—É—Å —Å–∏—Å—Ç–µ–º—ã

## üìä –ò—Å—Ç–æ—á–Ω–∏–∫–∏ –¥–∞–Ω–Ω—ã—Ö

**–í–ù–ò–ú–ê–ù–ò–ï:** –û–±–∞ —Å–µ—Ä–≤–µ—Ä–∞ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –æ–¥–Ω–∏ –∏ —Ç–µ –∂–µ –¥–∞–Ω–Ω—ã–µ!

- **8 MTConnect –º–∞—à–∏–Ω:** XD-20, SR-26, XD-38, SR-10, DT-26, SR-21, SR-23, SR-25
- **Adam-6050 —Å—á–µ—Ç—á–∏–∫–∏:** 10 –∫–∞–Ω–∞–ª–æ–≤ —Å –≤—ã—á–∏—Å–ª–µ–Ω–∏–µ–º –≤—Ä–µ–º–µ–Ω–∏ —Ü–∏–∫–ª–∞
- **Railway Cloud:** –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö –≤ –ø—Ä–æ–¥–∞–∫—à–Ω

## üîÑ –ü–æ—Ç–æ–∫ –¥–∞–Ω–Ω—ã—Ö

```
–ú–∞—à–∏–Ω—ã ‚Üí Edge Gateway ‚Üí Railway Cloud ‚Üê Cloud API
                ‚Üì
           –õ–æ–∫–∞–ª—å–Ω—ã–µ API
```

## üõ†Ô∏è –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –ò–∑–º–µ–Ω–µ–Ω–∏–µ Edge Gateway
1. –†–µ–¥–∞–∫—Ç–∏—Ä—É–π `src/main.ts`
2. `npm run build`
3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏ Edge Gateway

### –ò–∑–º–µ–Ω–µ–Ω–∏–µ Cloud API  
1. –†–µ–¥–∞–∫—Ç–∏—Ä—É–π —Ñ–∞–π–ª—ã –≤ `apps/cloud-api/src/`
2. Hot reload —Ä–∞–±–æ—Ç–∞–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ (NestJS watch mode)

### –ò–∑–º–µ–Ω–µ–Ω–∏–µ –¥–∞—à–±–æ—Ä–¥–æ–≤
1. –†–µ–¥–∞–∫—Ç–∏—Ä—É–π `apps/cloud-api/public/dashboard-new.html`
2. –û–±–Ω–æ–≤–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—É –≤ –±—Ä–∞—É–∑–µ—Ä–µ

## üöÄ –î–µ–ø–ª–æ–π

–ò–∑–º–µ–Ω–µ–Ω–∏—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–µ–ø–ª–æ—è—Ç—Å—è –Ω–∞ Railway –ø—Ä–∏ push –≤ main:

```powershell
git add -A
git commit -m "–æ–ø–∏—Å–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π"
git push origin main
```

**Railway URL:** https://mtconnect-core-production.up.railway.app

## üêõ –û—Ç–ª–∞–¥–∫–∞

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∞–Ω–Ω—ã—Ö
```powershell
# –õ–æ–∫–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ MTConnect
curl http://localhost:5000/current

# –°—Ç–∞—Ç—É—Å —Å–∏—Å—Ç–µ–º—ã
curl http://localhost:5000/health

# –î–∞–Ω–Ω—ã–µ Adam
curl http://localhost:5000/api/adam/counters

# Cloud API —Å—Ç–∞—Ç—É—Å
curl http://localhost:3000/api/dashboard/health
```

### –õ–æ–≥–∏
- **Edge Gateway:** –õ–æ–≥–∏ –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ –≥–¥–µ –∑–∞–ø—É—â–µ–Ω
- **Cloud API:** NestJS –ª–æ–≥–∏ + Winston (—Ñ–∞–π–ª—ã –≤ logs/)

### –¢–∏–ø–∏—á–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã
1. **–ü–æ—Ä—Ç –∑–∞–Ω—è—Ç:** –£–±–µ–π –ø—Ä–æ—Ü–µ—Å—Å—ã `taskkill /f /im node.exe`
2. **–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö:** –ü—Ä–æ–≤–µ—Ä—å MTConnect –∞–≥–µ–Ω—Ç—ã –≤ PIM/
3. **Railway –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:** –ü—Ä–æ–≤–µ—Ä—å `/railway-status`

## üì± –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

```powershell
# –°–±–æ—Ä–∫–∞ –≤—Å–µ—Ö –ø–∞–∫–µ—Ç–æ–≤
npm run build

# –¢–æ–ª—å–∫–æ Edge Gateway  
npm run start:edge

# –¢–æ–ª—å–∫–æ Cloud API
npm run start:cloud

# –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤—Å–µ—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ Node.js
taskkill /f /im node.exe

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–ø—É—â–µ–Ω–Ω—ã—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
Get-Process | Where-Object {$_.ProcessName -eq "node"}
``` 