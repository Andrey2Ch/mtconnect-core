# –ê–Ω–∞–ª–∏–∑ vfGateway —Å–∏—Å—Ç–µ–º—ã

## üéØ **–ß—Ç–æ —ç—Ç–æ:**
**vfGateway** - —ç—Ç–æ –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –ø—Ä–æ–º—ã—à–ª–µ–Ω–Ω–æ–≥–æ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –Ω–∞ ASP.NET Core + Angular —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö SQL Server.

## üìÅ **–°—Ç—Ä—É–∫—Ç—É—Ä–∞:**
```
PIM/vfGateway/
‚îú‚îÄ‚îÄ Pim.Triggerlog.exe          # Windows Service (–ø–æ—Ä—Ç 50119)
‚îú‚îÄ‚îÄ Advantech.Adam.DLL          # –î—Ä–∞–π–≤–µ—Ä—ã –¥–ª—è I/O –º–æ–¥—É–ª–µ–π
‚îú‚îÄ‚îÄ Advantech.AdamForm.DLL      # UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
‚îú‚îÄ‚îÄ wwwroot/                    # Angular frontend
‚îú‚îÄ‚îÄ VfGatewayDB/                # –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
‚îî‚îÄ‚îÄ appsettings.json            # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
```

## üîß **–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**

### **1. Windows Service**
- **PimIndexMaintenanceSvc_50119** - —Å–ª—É–∂–±–∞ –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö
- –†–∞–±–æ—Ç–∞–µ—Ç –≤ —Ñ–æ–Ω–µ –±–µ–∑ UI
- –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –æ—Ç —Å—Ç–∞–Ω–∫–æ–≤ –∏ –¥–∞—Ç—á–∏–∫–æ–≤

### **2. Advantech Adam –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è**
- **Advantech.Adam.DLL** - –¥—Ä–∞–π–≤–µ—Ä—ã –¥–ª—è I/O –º–æ–¥—É–ª–µ–π
- **Advantech.AdamForm.DLL** - UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
- **–ù–∞—Å—Ç—Ä–æ–µ–Ω–∞ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å I/O –º–æ–¥—É–ª—è–º–∏** - –ö–†–ò–¢–ò–ß–ï–°–ö–ò –í–ê–ñ–ù–û!

### **3. –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å**
- Angular –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (—Å–±–æ—Ä–∫–∞ –≤ wwwroot/)
- –ü–æ—Ä—Ç: `http://localhost:10007`
- –ì—Ä–∞—Ñ–∏–∫–∏, –æ—Ç—á—ë—Ç—ã, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏

### **4. –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö**
- SQL Server: `localhost\SQLEXPRESS`
- –ë–∞–∑—ã: `VfGatewayDB`, `IdentityDB`
- MongoDB –¥–ª—è —Ç—Ä–∏–≥–≥–µ—Ä–æ–≤

## ‚úÖ **–ü–æ–ª–µ–∑–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:**
- –ì–æ—Ç–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ —Å –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º
- –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö
- **Advantech Adam –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è - —É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞ –¥–ª—è I/O –º–æ–¥—É–ª–µ–π**
- –ì—Ä–∞—Ñ–∏–∫–∏ –∏ –æ—Ç—á—ë—Ç—ã
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –∏ —Ä–æ–ª–∏
- API –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

## ‚ùå **–ß—Ç–æ –ù–ï –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –Ω–∞—à–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞:**
- –°–ª–æ–∂–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ (SQL Server, .NET Framework)
- –ó–∞–∫—Ä—ã—Ç—ã–π –∫–æ–¥ (–Ω–µ–ª—å–∑—è –º–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å)
- –ò–∑–±—ã—Ç–æ—á–Ω–æ—Å—Ç—å (—É –Ω–∞—Å —É–∂–µ –µ—Å—Ç—å —Å–≤–æ–π –¥–∞—à–±–æ—Ä–¥)
- –ú–Ω–æ–≥–æ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
- –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã –ø–æ—Ä—Ç–æ–≤

## üéØ **–í—ã–≤–æ–¥:**
**vfGateway –ù–ï –Ω—É–∂–µ–Ω –¥–ª—è –Ω–∞—à–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞**, –Ω–æ –º–æ–∂–Ω–æ –≤–∑—è—Ç—å –∏–¥–µ–∏:
- –°—Ç—Ä—É–∫—Ç—É—Ä—É –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö
- –ì—Ä–∞—Ñ–∏–∫–∏ –∏ –æ—Ç—á—ë—Ç—ã –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è –¥–∞—à–±–æ—Ä–¥–∞
- API –ø–æ–¥—Ö–æ–¥ –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

## üö® **–ö–†–ò–¢–ò–ß–ï–°–ö–ò –í–ê–ñ–ù–û:**
**Advantech Adam –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞ –¥–ª—è I/O –º–æ–¥—É–ª–µ–π!** ‚úÖ **–†–ï–ê–õ–ò–ó–û–í–ê–ù–û**

### **–ß—Ç–æ —ç—Ç–æ –∑–Ω–∞—á–∏—Ç:**
- –ù–µ—Å–∫–æ–ª—å–∫–æ —Å—Ç–∞–Ω–∫–æ–≤ –ø–æ–¥–∫–ª—é—á–µ–Ω—ã —á–µ—Ä–µ–∑ **Advantech Adam I/O –º–æ–¥—É–ª–∏** ‚úÖ **–ü–û–î–¢–í–ï–†–ñ–î–ï–ù–û**
- –ù—É–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å **–∫–∞–∫ –º—ã –ø–æ–ª—É—á–∞–µ–º –æ—Ç –Ω–∏—Ö –¥–∞–Ω–Ω—ã–µ** ‚úÖ **–ü–†–û–í–ï–†–ï–ù–û**
- –í–æ–∑–º–æ–∂–Ω–æ, –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≥–æ—Ç–æ–≤—ã–µ –¥—Ä–∞–π–≤–µ—Ä—ã –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é ‚úÖ **–ò–°–ü–û–õ–¨–ó–£–ï–ú**

### **–ß—Ç–æ —É–∂–µ —Å–¥–µ–ª–∞–Ω–æ:**
1. ‚úÖ **–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Adam-6050** - —Ä–∞–±–æ—Ç–∞–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ (192.168.1.120:502)
2. ‚úÖ **–ß—Ç–µ–Ω–∏–µ —Å—á—ë—Ç—á–∏–∫–æ–≤** - –ø–æ–ª—É—á–∞–µ–º —Ä–µ–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –æ—Ç 10 —Å—Ç–∞–Ω–∫–æ–≤
3. ‚úÖ **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ MTConnect** - –¥–æ–±–∞–≤–ª–µ–Ω —ç–Ω–¥–ø–æ–∏–Ω—Ç `/api/adam/counters`
4. ‚úÖ **–ú–∞–ø–ø–∏–Ω–≥ —Å—Ç–∞–Ω–∫–æ–≤** - –∫–∞–∂–¥—ã–π –∫–∞–Ω–∞–ª –ø—Ä–∏–≤—è–∑–∞–Ω –∫ —Å–≤–æ–µ–º—É —Å—Ç–∞–Ω–∫—É

### **–ü–æ–ª—É—á–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:**
- **SR-22**: 58,663 –¥–µ—Ç–∞–ª–µ–π (–∫–∞–Ω–∞–ª DI0)
- **SB-16**: 5 –¥–µ—Ç–∞–ª–µ–π (–∫–∞–Ω–∞–ª DI1)  
- **BT-38**: 20,395 –¥–µ—Ç–∞–ª–µ–π (–∫–∞–Ω–∞–ª DI2)
- **K-162**: 8 –¥–µ—Ç–∞–ª–µ–π (–∫–∞–Ω–∞–ª DI3)
- **K-163**: 31,261 –¥–µ—Ç–∞–ª–µ–π (–∫–∞–Ω–∞–ª DI4)
- **L-20**: 2 –¥–µ—Ç–∞–ª–∏ (–∫–∞–Ω–∞–ª DI5)
- **K-16**: 57,589 –¥–µ—Ç–∞–ª–µ–π (–∫–∞–Ω–∞–ª DI6)
- **SR-20**: 43,743 –¥–µ—Ç–∞–ª–∏ (–∫–∞–Ω–∞–ª DI8)

### **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è vfGateway:**
- **SQL Server**: `localhost\SQLEXPRESS` (VfGatewayDB, IdentityDB)
- **MongoDB**: `localhost:27017` (Entities, Triggers)
- **Scheduler**: —á—Ç–µ–Ω–∏–µ –∫–∞–∂–¥—ã–µ 5 —Å–µ–∫—É–Ω–¥
- **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**: –≤ —Ñ–∞–π–ª—ã –∏ –Ω–∞ —É–¥–∞–ª—ë–Ω–Ω—ã–π —Å–µ—Ä–≤–µ—Ä
- **–í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å**: –ø–æ—Ä—Ç 10007

## üìã **–§–∞–π–ª—ã –¥–ª—è –∏–∑—É—á–µ–Ω–∏—è:**
- `PIM/vfGateway/Advantech.Adam.xml` - –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥—Ä–∞–π–≤–µ—Ä–æ–≤
- `PIM/vfGateway/appsettings.json` - –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
- `PIM/vfGateway/VfGatewayDB/` - —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

## Adam-6050 Integration Status

### ‚úÖ –†–ï–®–ï–ù–û: K-16 –∏ L-20 Counter Problem (2024-01-07)

**–ü—Ä–æ–±–ª–µ–º–∞**: K-16 –∏ L-20 –ø–æ–∫–∞–∑—ã–≤–∞–ª–∏ –º–∞–ª–µ–Ω—å–∫–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è (57,589 –∏ 2) –≤–º–µ—Å—Ç–æ –±–æ–ª—å—à–∏—Ö —Å—á–µ—Ç—á–∏–∫–æ–≤ (8+ –º–ª—Ä–¥)

**–†–µ—à–µ–Ω–∏–µ**:
1. **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω mapping –∫–∞–Ω–∞–ª–æ–≤**: SR-24 –ø–µ—Ä–µ–º–µ—â–µ–Ω —Å DI10 –Ω–∞ DI11 
2. **–ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞ Input Registers**: Function Code 04 –≤–º–µ—Å—Ç–æ 03
3. **32-–±–∏—Ç–Ω–æ–µ —á—Ç–µ–Ω–∏–µ**: –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ –¥–≤—É—Ö 16-–±–∏—Ç–Ω—ã—Ö —Ä–µ–≥–∏—Å—Ç—Ä–æ–≤

**–†–µ–∑—É–ª—å—Ç–∞—Ç**: ‚úÖ –í—Å–µ —Å—Ç–∞–Ω–∫–∏ —Ç–µ–ø–µ—Ä—å –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –±–æ–ª—å—à–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è

**–î–µ—Ç–∞–ª–∏**: –°–º. [ADAM-6050-SOLUTION.md]

---
*–ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–≤–µ–¥—ë–Ω: 2025-01-07*
*–ê–≤—Ç–æ—Ä: AI Assistant* 